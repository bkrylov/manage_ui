<h2>Library Staff Directory</h2>

<div>

        <div class="row">
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="First Name" size="25" maxlength="25" ng-model="formData.first" required>
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Last Name" size="25" maxlength="25" ng-model="formData.last" required>
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Email" size="40" maxlength="255" ng-model="formData.email" required>
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Title" size="40" maxlength="150" ng-model="formData.title" required>
            </div>
            <div class="col-md-3">
                <select class="form-control" ng-model="formData.rank" ng-options="rank for rank in ranks">
                </select>
            </div>
            <div class="col-md-5">
                <select class="form-control" ng-model="formData.dept" ng-options="dept for dept in departments">
                </select>
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" placeholder="Phone" size="8" maxlength="8" ng-model="formData.phone" required>
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" placeholder="Fax" size="8" maxlength="8" ng-model="formData.fax" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary" ng-click="addPerson()">Add New Person</button>

    <span ng-model="formResponse">{{formResponse}}</span>
</div>

<h3>Full list</h3>
<div>
    <ul class="list-inline">Sort By:
        <li><button type="button" class="btn btn-primary" ng-model="sortButton" btn-radio="'first'" ng-click="sortMode='firstname'">First Name</button></li>
        <li><button type="button" class="btn btn-primary" ng-model="sortButton" btn-radio="'last'" ng-click="sortMode='lastname'">Last Name</button></li>
        <li><button type="button" class="btn btn-primary" ng-model="sortButton" btn-radio="'title'" ng-click="sortMode='title'">Title</button></li>
        <li><button type="button" class="btn btn-primary" ng-model="sortButton" btn-radio="'dept'" ng-click="sortMode='department'">Department</button></li>
        <li><input type="text" placeholder="Filter by Last Name" size="25" maxlength="25" ng-model="filterBy"></li>
    </ul>

    <dl ng-repeat="person in Directory.list | filter:{lastname:filterBy} | orderBy:sortMode">
        <h4 ng-click="togglePerson(person)">{{person.firstname}} {{person.lastname}} <small>{{person.title}}</small>
            : {{person.department}}</h4>
        <div class="personExp" ng-show="person.show && hasAccess == 1">
            <dt>Title</dt>
            <dd><input type="text" class="form-control" placeholder="{{person.title}}" maxlength="150" ng-model="person.title" required></dd>
            <dt>Rank</dt>
            <dd>
                <select class="form-control" ng-model="person.rank" ng-options="rank for rank in ranks">
                </select>
            </dd>
            <dt>Department</dt>
            <dd>
                <select class="form-control" ng-model="person.department" ng-options="dept for dept in departments">
                </select>
            </dd>
            <dt>Division</dt>
            <dd><input type="text" class="form-control" placeholder="{{person.division}}" maxlength="150" ng-model="person.division"></dd>
            <dt>Phone</dt>
            <dd><input type="text" class="form-control" placeholder="{{person.phone}}" maxlength="8" ng-model="person.phone" required></dd>
            <dt>Email</dt>
            <dd><input type="text" class="form-control" placeholder="{{person.email}}" maxlength="255" ng-model="person.email" required></dd>
            <dt>Fax</dt>
            <dd><input type="text" class="form-control" placeholder="{{person.fax}}" maxlength="8" ng-model="person.fax" required></dd>
            <dt>&nbsp</dt><dd>
                <button type="button" class="btn btn-primary" ng-click="updatePerson(person)">Update information</button>
                <button type="button" class="btn btn-primary" ng-click="deletePerson(person, $index)">
                    Delete {{person.firstname}} {{person.lastname}} record
                </button>
            </dd>
            <dt>Subjects</dt>
            <dd>
                <ul class="list-unstyled">
                    <li  ng-repeat="subject in person.subjects">
                        <button type="button" class="btn btn-primary" ng-click="deleteSubject(person, subject.id, $index)">
                            Delete
                        </button>
                        <a href="{{subject.link}}">{{subject.subject}}</a>
                    </li>
                </ul>
                <div>
                    <select class="form-control" ng-model="person.selSubj" ng-options="sub.subject for sub in Directory.subjects">
                    </select>
                    <button type="button" class="btn btn-primary" ng-click="addSubject(person)">Add Subject</button>
                    <p>{{person.subjResponse}}</p>
                </div>
            </dd>
        </div>
        <div class="personExp" ng-click="togglePerson(person)" ng-show="person.show && hasAccess == 0">
            <dt>Title</dt>  <dd>{{person.title}}</dd>
            <dt ng-show="person.rank.length > 0">Rank</dt>  <dd>{{person.rank}}</dd>
            <dt>Departent</dt>  <dd>{{person.department}}</dd>
            <dt ng-show="person.division.length > 0">Division</dt>  <dd>{{person.division}}</dd>
            <dt>Phone</dt>  <dd>{{person.phone}}</dd>
            <dt>Email</dt>  <dd>{{person.email}}</dd>
            <dt>Fax</dt>  <dd>{{person.fax}}</dd>
            <dt>Subjects</dt>
            <dd>
                <ul class="list-inline">
                    <li ng-repeat="subject in person.subjects">
                        <a href="{{subject.link}}">{{subject.subject}}</a>
                    </li>
                </ul>
            </dd>
        </div>
    </dl>
</div>
